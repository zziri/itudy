# 03 함수

어떤 프로그램이든 가장 기본적인 단위가 함수이다

## 작게 만들어라

함수를 만드는 첫째 규칙은 '작게!'다. 함수를 만드는 둘째 규칙은 '더 작게!'다.

함수는 100줄을 넘어서는 안 된다. 아니 20줄도 길다.

if, else, while 등에 들어가는 블록은 한 줄이어야 한다. 대개 거기서 함수를 호출한다. 바깥을 감싸는 함수가 작아질 뿐만 아니라, 블록 안에서 호출하는 함수 이름을 적절히 짓는다면, 코드를 이해하기도 쉬워진다.

## 한 가지만 해라

함수는 한 가지를 해야한다. 그 한 가지를 잘 해야 한다. 그 한 가지만을 해야 한다.

지정된 함수 이름 아래에서 추상화 수준이 하나인 단계만 수행한다면 그 함수는 한 가지 작업만 한다.

## 함수 당 추상화 수준은 하나로

함수가 확실히 한 가지 작업만 하려면 함수 내 모든 문장의 추상화 수준이 동일 해야 한다.

getHtml()은 추상화 수준이 높음, PathParser.render(pagepath)는 추상화 수준이 중간, .append("\n")와 같은 코드는 추상화 수준이 아주 낮음. 이런 코드들이 섞여있지 않도록 해야 한다.

## 내려가기 규칙

코드는 위에서 아래로 이야기처럼 읽혀야 좋다. 한 함수 다음에는 추상화 수준이 한 단계 낮은 함수가 온다. 즉 프로그램을 위에서 아래로 읽으면 함수 추상화 수준이 한 단계씩 낮아진다.

## switch

함수는 한 가지만 해야 좋다. 하지만 본질적으로 switch 문은 N가지 일을 한다. 다형성을 이용해서 각 switch 문을 저차원 클래스에 숨기고 반복하지 않는 방법은 있다. switch 문을 추상 팩토리에 숨기고 각 케이스에 따라 적절한 파생 클래스의 인스턴스를 생성한다. 이렇게 상속 관계를 이용해서 switch 문을 숨긴다.